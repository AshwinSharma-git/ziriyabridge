<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#fffaf3">
<title>Happy Birthday Ziriya ğŸ‚</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,500;0,9..40,600;1,9..40,300&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOUNDATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
:root{
  /* Palette â€” warm gold + rose + deep amber on cream */
  --cream:  #fffaf3;
  --amber:  #f97316;
  --rose:   #f43f8a;
  --gold:   #f59e0b;
  --deep:   #7c2d12;
  --soft:   #92400e;
  --muted:  #c2865a;
  --ok:     #10b981;
  --card-bg: rgba(255,255,255,0.78);
  --card-border: rgba(249,115,22,0.18);
  --glow-amber: rgba(249,115,22,0.35);
  --glow-rose:  rgba(244,63,138,0.3);
}
html{height:100%;font-size:16px;}
body{
  min-height:100%;margin:0;overflow:hidden;
  font-family:'DM Sans',sans-serif;
  background: var(--cream);
  color: var(--deep);
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CANVASES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
canvas{position:fixed;top:0;left:0;pointer-events:none;}
#c-bg{width:100%;height:100%;z-index:0;}
#c-fw{width:100%;height:100%;z-index:3;}
#c-tc{width:100%;height:100%;z-index:25;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.pg{
  position:fixed;inset:0;z-index:10;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  padding:clamp(18px,4vw,32px);
  opacity:1;
  transition:none;
}
.pg.exit{
  pointer-events:none;
  animation:pgExit .5s cubic-bezier(.4,0,1,1) forwards;
}
.pg.hidden{
  opacity:0;pointer-events:none;
  transform:translateY(24px) scale(.96);
}
.pg.enter{
  animation:pgEnter .55s cubic-bezier(.16,1,.3,1) forwards;
}
@keyframes pgExit{
  from{opacity:1;transform:translateY(0) scale(1);}
  to{opacity:0;transform:translateY(-20px) scale(.95);}
}
@keyframes pgEnter{
  from{opacity:0;transform:translateY(28px) scale(.96);}
  to{opacity:1;transform:translateY(0) scale(1);}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GLASS CARD â€” premium liquid glass
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card{
  position:relative;
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 28px;
  padding: clamp(28px,5vw,44px) clamp(24px,5vw,40px);
  width:100%; max-width:460px;
  backdrop-filter: saturate(200%) blur(24px);
  -webkit-backdrop-filter: saturate(200%) blur(24px);
  overflow:hidden;
  box-shadow:
    0 0 0 1px rgba(255,255,255,.9) inset,
    0 1px 0 rgba(255,255,255,1) inset,
    0 4px 6px rgba(249,115,22,.04),
    0 12px 40px rgba(249,115,22,.08),
    0 40px 80px rgba(244,63,138,.06);
  transform-style: preserve-3d;
}
/* shimmer top edge */
.card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:1px;
  background:linear-gradient(90deg,transparent 5%,rgba(255,220,150,.9) 35%,rgba(255,180,100,.7) 60%,transparent 95%);
  z-index:1;
}
/* inner ambient glow */
.card::after{
  content:'';position:absolute;inset:0;border-radius:inherit;
  background:linear-gradient(145deg,rgba(255,255,255,.22) 0%,rgba(255,255,255,0) 50%);
  pointer-events:none;z-index:0;
}
.card > *{position:relative;z-index:2;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TYPOGRAPHY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.serif{font-family:'Instrument Serif',Georgia,serif;}
.display{
  font-family:'Instrument Serif',serif;
  font-size:clamp(2rem,6vw,3.4rem);
  line-height:1.05; letter-spacing:-.03em;
  background:linear-gradient(135deg,#f97316 0%,#f43f8a 60%,#f59e0b 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.display-xl{
  font-family:'Instrument Serif',serif;
  font-size:clamp(2.6rem,8vw,5.5rem);
  line-height:.96;letter-spacing:-.04em;
  background:linear-gradient(135deg,#f97316 0%,#f43f8a 50%,#f59e0b 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.body{font-size:clamp(.88rem,2.2vw,.98rem);color:var(--muted);line-height:1.7;font-weight:300;}
.label{
  display:inline-flex;align-items:center;gap:5px;
  padding:4px 14px;border-radius:100px;
  background:rgba(245,158,11,.12);border:1px solid rgba(245,158,11,.28);
  font-size:.68rem;font-weight:600;letter-spacing:.1em;text-transform:uppercase;
  color:var(--gold);margin-bottom:14px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BUTTONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:9px;
  padding:clamp(12px,2.5vw,15px) clamp(24px,4vw,34px);
  font-family:'DM Sans',sans-serif;font-size:clamp(.9rem,2vw,1rem);font-weight:600;
  color:#fff;border:none;border-radius:100px;cursor:pointer;
  background:linear-gradient(135deg,#f97316 0%,#f43f8a 100%);
  box-shadow:
    0 1px 0 rgba(255,255,255,.25) inset,
    0 6px 20px rgba(249,115,22,.28),
    0 2px 8px rgba(244,63,138,.2);
  transition:transform .2s cubic-bezier(.34,1.56,.64,1),box-shadow .2s ease;
  position:relative;overflow:hidden;user-select:none;
  -webkit-tap-highlight-color:transparent;
}
.btn::before{
  content:'';position:absolute;top:0;left:-100%;width:60%;height:100%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.18),transparent);
  transform:skewX(-20deg);
  transition:left .6s ease;
}
.btn:hover::before{left:150%;}
.btn:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 1px 0 rgba(255,255,255,.25) inset,0 10px 30px rgba(249,115,22,.35),0 4px 12px rgba(244,63,138,.25);}
.btn:active{transform:scale(.95);box-shadow:0 2px 10px rgba(249,115,22,.2);}

.btn-outline{
  background:transparent;
  border:1.5px solid rgba(249,115,22,.3);
  color:var(--amber);
  box-shadow:0 2px 12px rgba(249,115,22,.08);
}
.btn-outline:hover{background:rgba(249,115,22,.07);box-shadow:0 4px 20px rgba(249,115,22,.15);transform:translateY(-2px);}
.btn-outline::before{display:none;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   S1 â€” WELCOME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#p1{text-align:center;}
.hero-emoji{
  font-size:clamp(3.5rem,9vw,5.5rem);
  display:block;margin-bottom:18px;
  animation:heroFloat 3.5s ease-in-out infinite;
  filter:drop-shadow(0 8px 24px rgba(249,115,22,.3));
}
@keyframes heroFloat{
  0%,100%{transform:translateY(0) rotate(-3deg) scale(1);}
  50%{transform:translateY(-14px) rotate(3deg) scale(1.04);}
}
.ring{
  position:absolute;top:50%;left:50%;
  width:80px;height:80px;
  margin:-40px 0 0 -40px;
  border-radius:50%;
  border:2px solid rgba(249,115,22,.25);
  animation:ringPulse 2.4s ease-out infinite;
}
.ring:nth-child(2){animation-delay:.5s;}
.ring:nth-child(3){animation-delay:1s;}
@keyframes ringPulse{
  0%{transform:scale(.9);opacity:.8;}
  100%{transform:scale(2.2);opacity:0;}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   S2 â€” QUIZ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.prog-track{display:flex;gap:7px;margin-bottom:22px;}
.prog-seg{flex:1;height:3px;border-radius:100px;background:rgba(249,115,22,.12);overflow:hidden;position:relative;}
.prog-seg::after{content:'';position:absolute;inset:0;border-radius:inherit;background:var(--amber);transform:scaleX(0);transform-origin:left;transition:transform .5s cubic-bezier(.4,0,.2,1);}
.prog-seg.done::after{transform:scaleX(1);background:var(--ok);}
.prog-seg.cur::after{transform:scaleX(1);}

.q-text{font-size:clamp(.92rem,2.5vw,1.05rem);font-weight:500;line-height:1.65;color:var(--deep);margin-bottom:18px;white-space:pre-line;}
.q-opts{display:flex;flex-direction:column;gap:9px;margin-bottom:14px;}
.q-opt{
  padding:clamp(11px,2vw,14px) clamp(14px,3vw,18px);
  background:rgba(249,115,22,.04);
  border:1.5px solid rgba(249,115,22,.12);
  border-radius:14px;cursor:pointer;
  font-size:clamp(.86rem,2.2vw,.94rem);color:var(--soft);
  font-family:'DM Sans',sans-serif;font-weight:400;
  text-align:left;user-select:none;
  transition:background .15s,border-color .15s,color .15s,transform .15s cubic-bezier(.34,1.56,.64,1);
  position:relative;overflow:hidden;
}
.q-opt::before{
  content:'';position:absolute;left:0;top:0;bottom:0;width:3px;
  background:var(--amber);border-radius:0 3px 3px 0;
  transform:scaleY(0);transform-origin:center;
  transition:transform .2s cubic-bezier(.34,1.56,.64,1);
}
.q-opt:hover{background:rgba(249,115,22,.08);border-color:rgba(249,115,22,.28);color:var(--amber);transform:translateX(4px);}
.q-opt:hover::before{transform:scaleY(1);}
.q-opt:active{transform:scale(.97) translateX(2px);}
.q-opt.ok{background:rgba(16,185,129,.1);border-color:var(--ok);color:#065f46;transform:translateX(4px) !important;pointer-events:none;}
.q-opt.ok::before{background:var(--ok);transform:scaleY(1);}
.q-opt.no{background:rgba(239,68,68,.08);border-color:rgba(239,68,68,.4);color:#991b1b;transform:none !important;pointer-events:none;}
.q-fb{font-size:.78rem;min-height:24px;text-align:center;font-weight:500;line-height:1.6;opacity:0;transition:opacity .3s ease .1s;white-space:pre-line;}
.q-fb.vis{opacity:1;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   S3 â€” LOADING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.loader-wrap{text-align:center;max-width:360px;width:100%;}
.loader-ring{
  width:clamp(88px,18vw,108px);height:clamp(88px,18vw,108px);
  margin:0 auto 24px;position:relative;
}
.loader-ring svg{width:100%;height:100%;animation:lspin 1.8s linear infinite;}
@keyframes lspin{to{transform:rotate(360deg);}}
.loader-em{
  position:absolute;top:50%;left:50%;
  transform:translate(-50%,-50%);
  font-size:clamp(1.7rem,4vw,2.2rem);
  transition:transform .28s cubic-bezier(.34,1.56,.64,1),opacity .18s;
}
.loader-title{font-family:'Instrument Serif',serif;font-size:clamp(1.15rem,3vw,1.4rem);margin-bottom:8px;color:var(--deep);}
.loader-sub{font-size:clamp(.78rem,2vw,.88rem);color:var(--muted);min-height:46px;line-height:1.7;transition:opacity .25s;}
.bar-track{width:100%;height:3px;background:rgba(249,115,22,.1);border-radius:100px;margin-top:24px;overflow:hidden;}
.bar-fill{height:100%;width:0%;border-radius:100px;background:linear-gradient(90deg,var(--amber),var(--rose));transition:width .55s cubic-bezier(.4,0,.2,1);box-shadow:0 0 8px rgba(249,115,22,.4);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   S4 â€” BIRTHDAY MAIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#p4{
  background:radial-gradient(ellipse 90% 70% at 50% 20%,rgba(249,115,22,.07) 0%,transparent 65%);
}
.bday-wrap{text-align:center;max-width:520px;width:100%;}
.bday-date{display:inline-flex;align-items:center;gap:6px;padding:5px 16px;margin-bottom:18px;background:rgba(245,158,11,.12);border:1px solid rgba(245,158,11,.3);border-radius:100px;font-size:.7rem;font-weight:700;letter-spacing:.12em;color:var(--gold);text-transform:uppercase;}
.bday-note{font-size:clamp(.92rem,2.5vw,1.05rem);color:var(--muted);margin-bottom:28px;line-height:1.75;}
.btn-row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   S5 â€” CAKE GAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#p5{overflow-y:auto;-webkit-overflow-scrolling:touch;align-items:flex-start;padding-top:clamp(22px,4vw,36px);padding-bottom:clamp(22px,4vw,36px);}
@media(min-width:700px){#p5{align-items:center;overflow-y:visible;}}
.cake-card{text-align:center;max-width:450px;width:100%;}
.cake-svg-wrap{display:inline-block;filter:drop-shadow(0 10px 28px rgba(249,115,22,.2));cursor:pointer;}
.candle-hint{font-size:.76rem;color:var(--muted);margin:10px 0 5px;animation:blink 2.4s ease-in-out infinite;}
@keyframes blink{0%,100%{opacity:1;}55%{opacity:.25;}}
.blow-track{display:flex;gap:9px;justify-content:center;margin-bottom:16px;}
.blow-dot{
  width:11px;height:11px;border-radius:50%;
  background:rgba(249,115,22,.15);
  transition:background .4s,box-shadow .4s,transform .35s cubic-bezier(.34,1.56,.64,1);
}
.blow-dot.lit{background:var(--gold);box-shadow:0 0 14px rgba(245,158,11,.7),0 0 4px rgba(245,158,11,.5);transform:scale(1.25);}
.wish-list{display:flex;flex-direction:column;gap:8px;max-height:175px;overflow-y:auto;}
.wish-list::-webkit-scrollbar{width:3px;}
.wish-list::-webkit-scrollbar-thumb{background:rgba(249,115,22,.2);border-radius:3px;}
.wish-pill{
  display:flex;align-items:center;gap:9px;
  padding:8px 16px;
  background:rgba(249,115,22,.06);border:1px solid rgba(249,115,22,.15);
  border-radius:100px;font-size:.82rem;color:var(--soft);
  opacity:0;animation:pillPop .42s cubic-bezier(.34,1.56,.64,1) forwards;
}
@keyframes pillPop{
  from{transform:scale(.5) translateY(8px);opacity:0;}
  to{transform:scale(1) translateY(0);opacity:1;}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   S6 â€” FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#p6{text-align:center;}
.final-emojis{font-size:clamp(1.8rem,5vw,2.4rem);letter-spacing:7px;display:block;margin-bottom:18px;animation:efloat 4s ease-in-out infinite;}
@keyframes efloat{0%,100%{transform:translateY(0);}50%{transform:translateY(-7px);}}
.final-sign{font-family:'Instrument Serif',serif;font-style:italic;font-size:clamp(1.2rem,3vw,1.5rem);color:var(--amber);margin-top:18px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CELEB OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#celeb{
  position:fixed;inset:0;z-index:90;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  pointer-events:none;opacity:0;
  transition:opacity .4s ease,backdrop-filter .4s ease;
  background:rgba(255,245,235,0);
}
#celeb.on{
  opacity:1;pointer-events:all;
  background:rgba(255,245,230,.5);
  backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);
}
.celeb-text{
  font-family:'Instrument Serif',serif;
  font-size:clamp(2.5rem,10vw,6rem);
  font-weight:400;
  background:linear-gradient(135deg,var(--amber),var(--rose),var(--gold));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  text-align:center;line-height:1.05;
  transform:scale(.3);opacity:0;
  transition:transform .55s cubic-bezier(.34,1.56,.64,1),opacity .35s;
}
#celeb.on .celeb-text{transform:scale(1);opacity:1;}
.celeb-sub{color:var(--soft);font-size:.95rem;margin-top:10px;font-weight:300;opacity:0;transform:translateY(8px);transition:opacity .4s .25s,transform .4s .25s;}
#celeb.on .celeb-sub{opacity:1;transform:none;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI PIECES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cf{position:fixed;top:-30px;pointer-events:none;z-index:20;animation:cfDrop linear forwards;}
@keyframes cfDrop{to{transform:translateY(115vh) rotate(720deg);opacity:0;}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE + SAFE AREA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media(max-width:360px){
  .card{padding:22px 18px;border-radius:22px;}
  .display{font-size:1.7rem;}
  .btn{padding:11px 22px;font-size:.86rem;}
}
@supports(padding:max(0px)){
  .pg{
    padding-top:max(clamp(18px,4vw,32px),env(safe-area-inset-top));
    padding-bottom:max(clamp(18px,4vw,32px),env(safe-area-inset-bottom));
    padding-left:max(clamp(18px,4vw,32px),env(safe-area-inset-left));
    padding-right:max(clamp(18px,4vw,32px),env(safe-area-inset-right));
  }
}
::-webkit-scrollbar{width:4px;}
::-webkit-scrollbar-thumb{background:rgba(249,115,22,.2);border-radius:4px;}
</style>
</head>
<body>

<!-- CANVASES -->
<canvas id="c-bg"></canvas>
<canvas id="c-fw"></canvas>
<canvas id="c-tc"></canvas>

<!-- â”€â”€ P1: WELCOME â”€â”€ -->
<div class="pg" id="p1">
  <div class="card" style="text-align:center;max-width:420px;">
    <div style="position:relative;display:inline-block;margin-bottom:18px;">
      <div class="ring"></div>
      <div class="ring"></div>
      <div class="ring"></div>
      <span class="hero-emoji">ğŸ‚</span>
    </div>
    <div class="label">âœ¦ Feb 23 Â· Special Delivery</div>
    <h1 class="display" style="margin-bottom:12px;">Hey Ziriya! ğŸ‘‹</h1>
    <p class="body" style="margin-bottom:28px;">Something fun is waiting for you.<br>Let's see if you can unlock it ğŸ˜„</p>
    <button class="btn" id="btnStart">Get Started â†’</button>
  </div>
</div>

<!-- â”€â”€ P2: QUIZ â”€â”€ -->
<div class="pg hidden" id="p2">
  <div class="card" style="max-width:450px;">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:22px;">
      <span style="font-size:1.6rem;">ğŸ”</span>
      <div>
        <h2 class="display" style="font-size:1.5rem;margin-bottom:2px;">Prove you're Ziriya</h2>
        <p class="body" style="margin-top:0;">3 questions. No cheating ğŸ˜„</p>
      </div>
    </div>
    <div class="prog-track" id="progTrack">
      <div class="prog-seg cur" id="ps0"></div>
      <div class="prog-seg" id="ps1"></div>
      <div class="prog-seg" id="ps2"></div>
    </div>
    <p class="q-text" id="qTxt"></p>
    <div class="q-opts" id="qOpts"></div>
    <p class="q-fb" id="qFb"></p>
  </div>
</div>

<!-- â”€â”€ P3: LOADING â”€â”€ -->
<div class="pg hidden" id="p3">
  <div class="card loader-wrap">
    <div class="loader-ring">
      <svg viewBox="0 0 90 90" xmlns="http://www.w3.org/2000/svg">
        <circle cx="45" cy="45" r="38" fill="none" stroke="rgba(249,115,22,.08)" stroke-width="5"/>
        <circle cx="45" cy="45" r="38" fill="none" stroke="url(#rg)" stroke-width="5"
          stroke-linecap="round" stroke-dasharray="238" stroke-dashoffset="175"/>
        <defs>
          <linearGradient id="rg" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#f97316"/>
            <stop offset="100%" stop-color="#f43f8a"/>
          </linearGradient>
        </defs>
      </svg>
      <div class="loader-em" id="lEm">ğŸ‰</div>
    </div>
    <p class="loader-title" id="lTitle">Getting things readyâ€¦</p>
    <p class="loader-sub" id="lSub" style="opacity:0;"></p>
    <div class="bar-track"><div class="bar-fill" id="lBar"></div></div>
  </div>
</div>

<!-- â”€â”€ P4: BIRTHDAY â”€â”€ -->
<div class="pg hidden" id="p4">
  <div class="bday-wrap">
    <div class="bday-date">ğŸŠ February 23rd</div>
    <h1 class="display-xl" style="margin-bottom:14px;">Happy<br>Birthday,<br>Ziriya! ğŸ¥³</h1>
    <p class="bday-note">23 looks amazing on you.<br>Go make it the best day ever! ğŸ‰</p>
    <div class="btn-row">
      <button class="btn" id="btnCake">ğŸ‚ Cut the Cake!</button>
      <button class="btn btn-outline" id="btnFw">ğŸ† Fireworks!</button>
    </div>
  </div>
</div>

<!-- â”€â”€ P5: CAKE GAME â”€â”€ -->
<div class="pg hidden" id="p5">
  <div class="card cake-card" style="max-width:440px;">
    <h2 class="display" style="font-size:1.5rem;margin-bottom:5px;">Make a Wish! ğŸ•¯ï¸</h2>
    <p class="body" style="margin-bottom:16px;">Tap each candle to blow it out</p>
    <div class="cake-svg-wrap" id="cakeWrap"></div>
    <p class="candle-hint" id="candleHint">ğŸ‘† Tap a candle!</p>
    <div class="blow-track" id="blowTrack"></div>
    <div class="wish-list" id="wishList"></div>
    <div id="cakeDone" style="display:none;margin-top:18px;text-align:center;">
      <p style="font-size:.95rem;font-weight:500;margin-bottom:14px;color:var(--soft);">All 5 wishes sent! ğŸŒŸ</p>
      <button class="btn" id="btnGift">Open Your Gift ğŸ</button>
    </div>
  </div>
</div>

<!-- â”€â”€ P6: FINAL â”€â”€ -->
<div class="pg hidden" id="p6">
  <div class="card" style="max-width:430px;text-align:center;">
    <span class="final-emojis">ğŸ‰ğŸ‚âœ¨ğŸğŸ¥³</span>
    <h1 class="display" style="font-size:clamp(1.9rem,5vw,2.4rem);margin-bottom:12px;">Happy Birthday, Ziriya!</h1>
    <p class="body" style="font-size:.95rem;margin-bottom:14px;">Wishing you an incredible year ahead.<br>Have the best day! ğŸŠ</p>
    <p class="final-sign">â€” Your friend ğŸ«¶</p>
    <div style="margin-top:22px;">
      <button class="btn" id="btnFinale">ğŸ† Grand Finale!</button>
    </div>
  </div>
</div>

<!-- CELEB OVERLAY -->
<div id="celeb">
  <div class="celeb-text" id="celebTxt">ğŸ‰</div>
  <div class="celeb-sub" id="celebSub">Tap to continue</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
(function(){
'use strict';

/* â”€â”€ HELPERS â”€â”€ */
var G = function(id){ return document.getElementById(id); };
var cur = 1;
var blown = 0;
var candles = [false,false,false,false,false];
var CKCOLS = ['#f97316','#f43f8a','#f59e0b','#38bdf8','#a78bfa'];
var WISHES = [
  'Best year yet! ğŸŒŸ',
  'Lots of laughter ğŸ˜‚',
  'All goals â€” smashed! âœ…',
  'Good vibes only ğŸŠ',
  'Health, happiness and cake! ğŸ‚'
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CANVAS SYSTEM â€” size first
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var bgC = G('c-bg'), fwC = G('c-fw'), tcC = G('c-tc');
var bgX = bgC.getContext('2d');
var fwX = fwC.getContext('2d');
var tcX = tcC.getContext('2d');
var W = 0, H = 0;

function sizeCanvases(){
  W = bgC.width = fwC.width = tcC.width = window.innerWidth;
  H = bgC.height = fwC.height = tcC.height = window.innerHeight;
  bgC.style.width = fwC.style.width = tcC.style.width = W + 'px';
  bgC.style.height = fwC.style.height = tcC.style.height = H + 'px';
}
sizeCanvases(); // SIZE FIRST, always

var resizeTimer;
window.addEventListener('resize', function(){
  clearTimeout(resizeTimer);
  resizeTimer = setTimeout(function(){ sizeCanvases(); bgInitOrbs(); }, 120);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BG â€” silky aurora orbs
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var orbs = [];
var ORB_COLORS = [
  [249,115,22],  // amber
  [244,63,138],  // rose
  [245,158,11],  // gold
  [251,146,60],  // peach
  [252,211,77]   // yellow
];

function bgInitOrbs(){
  orbs = [];
  var n = Math.max(6, Math.min(18, Math.floor(W * H / 35000)));
  for(var i = 0; i < n; i++){
    var ci = Math.floor(Math.random() * ORB_COLORS.length);
    var rgb = ORB_COLORS[ci];
    orbs.push({
      x: Math.random() * W,
      y: Math.random() * H,
      r: 100 + Math.random() * 160,
      vx: (Math.random() - .5) * .14,
      vy: (Math.random() - .5) * .14,
      a: .018 + Math.random() * .032,
      r0: rgb[0], g0: rgb[1], b0: rgb[2]
    });
  }
}
bgInitOrbs();

function bgLoop(){
  bgX.clearRect(0, 0, W, H);
  for(var i = 0; i < orbs.length; i++){
    var o = orbs[i];
    o.x += o.vx; o.y += o.vy;
    if(o.x < -o.r) o.x = W + o.r;
    else if(o.x > W + o.r) o.x = -o.r;
    if(o.y < -o.r) o.y = H + o.r;
    else if(o.y > H + o.r) o.y = -o.r;
    var grd = bgX.createRadialGradient(o.x, o.y, 0, o.x, o.y, o.r);
    grd.addColorStop(0,  'rgba('+o.r0+','+o.g0+','+o.b0+','+o.a+')');
    grd.addColorStop(.5, 'rgba('+o.r0+','+o.g0+','+o.b0+','+(o.a*.3)+')');
    grd.addColorStop(1,  'rgba('+o.r0+','+o.g0+','+o.b0+',0)');
    bgX.fillStyle = grd;
    bgX.beginPath();
    bgX.arc(o.x, o.y, o.r, 0, Math.PI*2);
    bgX.fill();
  }
  requestAnimationFrame(bgLoop);
}
bgLoop();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FIREWORKS â€” premium physics
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var FW_PALETTE = [
  [249,115,22],[244,63,138],[245,158,11],[56,189,248],[167,139,250],
  [251,146,60],[52,211,153],[248,113,113],[196,181,253],[253,224,71]
];
var fwRockets = [], fwParticles = [];

function RocketFW(){
  this.x = W * .08 + Math.random() * W * .84;
  this.y = H + 8;
  this.tx = W * .08 + Math.random() * W * .84;
  this.ty = H * .06 + Math.random() * H * .42;
  var dx = this.tx - this.x, dy = this.ty - this.y;
  var dist = Math.sqrt(dx*dx + dy*dy) || 1;
  var spd = 12 + Math.random() * 5;
  this.vx = (dx/dist) * spd;
  this.vy = (dy/dist) * spd;
  this.trail = [];
  this.done = false;
  var ci = Math.floor(Math.random() * FW_PALETTE.length);
  this.cr = FW_PALETTE[ci][0];
  this.cg = FW_PALETTE[ci][1];
  this.cb = FW_PALETTE[ci][2];
  this.size = 2.2 + Math.random() * .8;
}
RocketFW.prototype.tick = function(){
  this.trail.push({x:this.x, y:this.y});
  if(this.trail.length > 16) this.trail.shift();
  this.x += this.vx; this.y += this.vy;
  var ddx = this.x - this.tx, ddy = this.y - this.ty;
  if(this.y <= this.ty || Math.sqrt(ddx*ddx+ddy*ddy) < 14){
    this.boom(); this.done = true;
  }
};
RocketFW.prototype.boom = function(){
  var n = 60 + Math.floor(Math.random() * 30);
  for(var i = 0; i < n; i++){
    var a = (i/n)*Math.PI*2 + (Math.random()-.5)*.5;
    var s = 1.5 + Math.random() * 6;
    fwParticles.push({
      x: this.x, y: this.y,
      vx: Math.cos(a)*s, vy: Math.sin(a)*s - .5,
      alpha: 1,
      cr: this.cr, cg: this.cg, cb: this.cb,
      r: 1.4 + Math.random() * 1.6,
      life: 55 + Math.floor(Math.random()*35),
      tail: Math.random() > .4
    });
  }
  /* starburst ring */
  for(var j = 0; j < 12; j++){
    var aa = (j/12)*Math.PI*2;
    fwParticles.push({
      x: this.x, y: this.y,
      vx: Math.cos(aa)*2.5, vy: Math.sin(aa)*2.5,
      alpha: .8,
      cr: 255, cg: 255, cb: 255,
      r: .8, life: 30, tail: false
    });
  }
};
RocketFW.prototype.draw = function(){
  if(this.trail.length < 2) return;
  for(var i = 1; i < this.trail.length; i++){
    var p = i / this.trail.length;
    fwX.globalAlpha = p * .72;
    fwX.strokeStyle = 'rgb('+this.cr+','+this.cg+','+this.cb+')';
    fwX.lineWidth = this.size * p;
    fwX.lineCap = 'round';
    fwX.beginPath();
    fwX.moveTo(this.trail[i-1].x, this.trail[i-1].y);
    fwX.lineTo(this.trail[i].x, this.trail[i].y);
    fwX.stroke();
  }
  /* head glow */
  fwX.globalAlpha = 1;
  fwX.shadowColor = 'rgba('+this.cr+','+this.cg+','+this.cb+',.8)';
  fwX.shadowBlur = 10;
  fwX.beginPath();
  fwX.arc(this.x, this.y, this.size*.7, 0, Math.PI*2);
  fwX.fillStyle = '#fff'; fwX.fill();
  fwX.shadowBlur = 0;
};

function fwLoop(){
  /* use alpha fade for trail persistence */
  fwX.fillStyle = 'rgba(255,250,243,.14)';
  fwX.fillRect(0, 0, W, H);

  for(var i = fwRockets.length-1; i >= 0; i--){
    fwRockets[i].tick(); fwRockets[i].draw();
    if(fwRockets[i].done) fwRockets.splice(i, 1);
  }

  for(var j = fwParticles.length-1; j >= 0; j--){
    var p = fwParticles[j];
    p.x += p.vx; p.y += p.vy;
    p.vy += .068; p.vx *= .986;
    p.alpha -= .017; p.life--;
    if(p.alpha <= 0 || p.life <= 0){ fwParticles.splice(j,1); continue; }
    var a2 = p.alpha * p.alpha; /* quadratic = smoother */
    if(p.tail){
      fwX.shadowColor = 'rgba('+p.cr+','+p.cg+','+p.cb+',.6)';
      fwX.shadowBlur = 5;
    }
    fwX.beginPath();
    fwX.arc(p.x, p.y, p.r, 0, Math.PI*2);
    fwX.fillStyle = 'rgba('+p.cr+','+p.cg+','+p.cb+','+a2+')';
    fwX.fill();
    fwX.shadowBlur = 0;
  }
  requestAnimationFrame(fwLoop);
}
fwLoop();

function burst(n){
  n = n || 10;
  var i = 0;
  var iv = setInterval(function(){
    fwRockets.push(new RocketFW());
    if(++i >= n) clearInterval(iv);
  }, 210);
}
function megaBurst(){
  var i = 0;
  var iv = setInterval(function(){
    fwRockets.push(new RocketFW());
    fwRockets.push(new RocketFW());
    fwRockets.push(new RocketFW());
    if(++i >= 24) clearInterval(iv);
  }, 150);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOUCH PARTICLES â€” emoji burst
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var TC_E = ['ğŸ‰','ğŸŠ','ğŸ','âœ¨','ğŸŒŸ','ğŸ¥³','ğŸˆ','ğŸ°','ğŸ‚','ğŸ’«','ğŸ€','â­','ğŸ”¥'];
var tcPts = [];

function spawnTc(x, y, n){
  n = n || 7;
  for(var i = 0; i < n; i++){
    var a = Math.random()*Math.PI*2;
    var s = 1.8 + Math.random()*4.2;
    tcPts.push({
      x:x, y:y,
      vx: Math.cos(a)*s, vy: Math.sin(a)*s - 2.8,
      e: TC_E[Math.floor(Math.random()*TC_E.length)],
      life: 1, dec: .013 + Math.random()*.01,
      sz: 13 + Math.random()*13,
      rot: Math.random()*Math.PI*2,
      rs: (Math.random()-.5)*.22
    });
  }
}

function tcLoop(){
  tcX.clearRect(0, 0, W, H);
  for(var i = tcPts.length-1; i >= 0; i--){
    var p = tcPts[i];
    p.x += p.vx; p.y += p.vy;
    p.vy += .12; p.vx *= .974;
    p.life -= p.dec; p.rot += p.rs;
    if(p.life <= 0){ tcPts.splice(i,1); continue; }
    tcX.save();
    tcX.globalAlpha = Math.min(1, p.life * 1.5);
    tcX.translate(p.x, p.y); tcX.rotate(p.rot);
    tcX.font = p.sz + 'px serif';
    tcX.textAlign = 'center'; tcX.textBaseline = 'middle';
    tcX.fillText(p.e, 0, 0);
    tcX.restore();
  }
  requestAnimationFrame(tcLoop);
}
tcLoop();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function launchConf(n){
  n = n || 32;
  var em = ['ğŸŠ','ğŸ‰','âœ¨','ğŸˆ','ğŸ€','ğŸŒŸ','ğŸ’«','â­','ğŸ”¥'];
  for(var i = 0; i < n; i++){
    (function(ii){
      setTimeout(function(){
        var el = document.createElement('div');
        el.className = 'cf';
        el.textContent = em[Math.floor(Math.random()*em.length)];
        el.style.left = (Math.random()*100) + 'vw';
        el.style.fontSize = (.6 + Math.random()*.95) + 'rem';
        el.style.animationDuration = (2 + Math.random()*2.8) + 's';
        el.style.animationDelay = (Math.random()*.45) + 's';
        document.body.appendChild(el);
        setTimeout(function(){ if(el.parentNode) el.remove(); }, 6500);
      }, ii * 75);
    })(i);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function goTo(n){
  var prev = G('p'+cur);
  cur = n;
  var next = G('p'+n);

  prev.classList.add('exit');
  setTimeout(function(){
    prev.classList.remove('exit');
    prev.classList.add('hidden');
  }, 480);

  setTimeout(function(){
    next.classList.remove('hidden');
    next.classList.add('enter');
    setTimeout(function(){ next.classList.remove('enter'); }, 600);
  }, 120);

  if(n===2) initQuiz();
  if(n===3) startLoad();
  if(n===4){ burst(10); launchConf(22); showCeleb('Happy Birthday! ğŸ‚', "It's your day, Ziriya! ğŸ¥³"); }
  if(n===5) initCake();
  if(n===6){ setTimeout(megaBurst, 200); launchConf(30); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CELEB OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showCeleb(txt, sub){
  G('celebTxt').textContent = txt;
  G('celebSub').textContent = sub;
  G('celeb').classList.add('on');
  setTimeout(hideCeleb, 3400);
}
function hideCeleb(){ G('celeb').classList.remove('on'); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var QS = [
  {
    q: 'Q1 Â· Karate ğŸ¥‹\n\nIn karate, what does the term "kata" refer to?',
    opts: [
      'A type of attacking punch',
      'A choreographed sequence of techniques',
      'The name for a karate belt rank',
      'A competitive sparring format'
    ],
    ans: 1,
    ok: 'âœ“ Exactly! Kata = a solo sequence of techniques ğŸ¥‹',
    fail: 'Kata = a choreographed sequence of moves â€” real karatekas know this! ğŸ¥‹'
  },
  {
    q: 'Q2 Â· Fun ğŸ˜‚\n\nZiriya gets a totally free day â€” what actually happens?',
    opts: [
      'Studies 8 hours straight ğŸ“š',
      'Sleeps till 2pm, zero regrets ğŸ˜´',
      'Wakes up at 6am to be productive',
      'Deep cleans the entire room'
    ],
    ans: 1,
    ok: 'âœ“ The only correct answer ğŸ˜‚',
    fail: 'We all know it\'s sleeping till 2pm ğŸ˜‚'
  },
  {
    q: 'Q3 Â· HARD ğŸ”¥\n\nEvaluate this integral:\n\nâˆ«â‚€^âˆ  x Â· e^(âˆ’xÂ²) dx = ?',
    opts: ['0', '1/2', 'Ï€ / 4', 'Diverges'],
    ans: 1,
    ok: 'âœ“ GENIUS! ğŸ¤¯\n(u = xÂ², du = 2x dx â†’ Â½âˆ«â‚€^âˆ e^âˆ’u du = 1/2)',
    fail: 'Answer: 1/2\nLet u = xÂ², du = 2x dx\nâ†’ Â½ âˆ«â‚€^âˆ e^(âˆ’u) du = Â½ ğŸ”¥'
  }
];
var qi = 0, qlocked = false;

function initQuiz(){ qi = 0; qlocked = false; renderQ(); }

function renderQ(){
  qlocked = false;
  var q = QS[qi];
  G('qTxt').textContent = q.q;
  var oc = G('qOpts'); oc.innerHTML = '';
  for(var i = 0; i < q.opts.length; i++){
    (function(idx){
      var b = document.createElement('button');
      b.className = 'q-opt'; b.textContent = q.opts[idx];
      b.addEventListener('click', function(){ answerQ(idx, b); });
      oc.appendChild(b);
    })(i);
  }
  var fb = G('qFb');
  fb.textContent = ''; fb.classList.remove('vis'); fb.style.color = '';
  for(var d = 0; d < 3; d++){
    var seg = G('ps'+d);
    seg.className = 'prog-seg' + (d < qi ? ' done' : d === qi ? ' cur' : '');
  }
}

function answerQ(idx, btn){
  if(qlocked) return; qlocked = true;
  var q = QS[qi];
  var allOpts = document.querySelectorAll('.q-opt');
  for(var i = 0; i < allOpts.length; i++) allOpts[i].style.pointerEvents = 'none';
  var fb = G('qFb');
  if(idx === q.ans){
    btn.classList.add('ok'); fb.textContent = q.ok; fb.style.color = '#065f46';
    var br = btn.getBoundingClientRect();
    spawnTc(br.left + br.width/2, br.top + br.height/2, 7);
  } else {
    btn.classList.add('no');
    allOpts[q.ans].classList.add('ok');
    fb.textContent = q.fail; fb.style.color = '#991b1b';
  }
  fb.classList.add('vis');
  setTimeout(function(){
    qi++;
    if(qi < QS.length) renderQ();
    else setTimeout(function(){ goTo(3); }, 350);
  }, idx === q.ans ? 1350 : 1800);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LOADING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
var LMSGS = [
  'Identity confirmed! âœ…',
  'Gathering birthday energyâ€¦ ğŸŠ',
  'Adding extra sprinklesâ€¦ ğŸ‚',
  'Almost ready! âœ¨'
];
var LEMJS = ['ğŸ‰','ğŸ¥³','ğŸ‚','ğŸŠ','ğŸŒŸ','âœ¨','ğŸ”¥'];

function startLoad(){
  var bar = G('lBar'), sub = G('lSub'), em = G('lEm'), ti = G('lTitle');
  var fi = 0, ei = 0;
  bar.style.width = '0%';
  sub.style.opacity = '0';
  setTimeout(function(){ sub.textContent = LMSGS[0]; sub.style.opacity = '1'; }, 220);

  var fiv = setInterval(function(){
    fi++;
    sub.style.opacity = '0';
    setTimeout(function(){
      sub.textContent = LMSGS[Math.min(fi, LMSGS.length-1)];
      sub.style.opacity = '1';
    }, 220);
  }, 1000);

  var eiv = setInterval(function(){
    var nx = LEMJS[ei++ % LEMJS.length];
    em.style.opacity = '0'; em.style.transform = 'translate(-50%,-50%) scale(.5)';
    setTimeout(function(){
      em.textContent = nx;
      em.style.opacity = '1'; em.style.transform = 'translate(-50%,-50%) scale(1)';
    }, 160);
  }, 520);

  var steps = [
    {w:22, d:520, t:'Verifying identityâ€¦'},
    {w:54, d:660, t:'Loading birthday magicâ€¦'},
    {w:82, d:520, t:'Almost thereâ€¦'},
    {w:100, d:360, t:'Done! ğŸ‰'}
  ];
  var si = 0;
  function nxt(){
    if(si >= steps.length){
      clearInterval(fiv); clearInterval(eiv);
      setTimeout(function(){ goTo(4); }, 280);
      return;
    }
    var s = steps[si++];
    ti.textContent = s.t; bar.style.width = s.w + '%';
    setTimeout(nxt, s.d);
  }
  setTimeout(nxt, 180);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CAKE GAME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initCake(){
  blown = 0; candles = [false,false,false,false,false];
  G('wishList').innerHTML = '';
  G('cakeDone').style.display = 'none';
  G('candleHint').style.display = 'block';
  var bt = G('blowTrack'); bt.innerHTML = '';
  for(var i = 0; i < 5; i++){
    var d = document.createElement('div');
    d.className = 'blow-dot'; d.id = 'bd'+i; bt.appendChild(d);
  }
  drawCake();
}

function makeCake(){
  /* flame SVG fragments */
  var flames = '';
  for(var i = 0; i < 5; i++){
    var cx = 34 + i*38, cy = 50;
    if(candles[i]){
      flames += '<ellipse cx="'+cx+'" cy="'+(cy+3)+'" rx="3" ry="2" fill="#bbb" opacity=".25"/>';
    } else {
      flames += '<g style="transform-origin:'+cx+'px '+(cy+9)+'px;animation:flk .3s ease-in-out infinite alternate;">'
        +'<ellipse cx="'+cx+'" cy="'+cy+'" rx="5.5" ry="10" fill="#fde047" opacity=".98"/>'
        +'<ellipse cx="'+cx+'" cy="'+(cy+2)+'" rx="3" ry="5.5" fill="#fb923c" opacity=".9"/>'
        +'<ellipse cx="'+cx+'" cy="'+(cy+5)+'" rx="1.5" ry="3" fill="#fff9c4" opacity=".85"/>'
        +'</g>';
    }
  }
  /* candle bodies */
  var cands = '';
  for(var j = 0; j < 5; j++){
    var ccx = 34 + j*38;
    var ch = j%2===0 ? 30 : 22, cy2 = j%2===0 ? 64 : 71;
    var op = candles[j] ? '.25' : '1';
    cands += '<rect x="'+(ccx-5)+'" y="'+cy2+'" width="10" height="'+ch+'" rx="5" fill="'+CKCOLS[j]+'" opacity="'+op+'"/>';
    /* candle shine */
    if(!candles[j]){
      cands += '<rect x="'+(ccx-2)+'" y="'+(cy2+3)+'" width="2" height="'+(ch*.45)+'" rx="1" fill="rgba(255,255,255,.4)"/>';
    }
  }
  return {flames:flames, cands:cands};
}

function drawCake(){
  var wrap = G('cakeWrap');
  var parts = makeCake();

  wrap.innerHTML =
    '<style>'
    +'@keyframes flk{'
    +'from{transform:scaleX(1) scaleY(1) rotate(0deg);}'
    +'to{transform:scaleX(.72) scaleY(.86) rotate(6deg);}'
    +'}'
    +'</style>'
    +'<svg viewBox="0 0 220 260" width="200" xmlns="http://www.w3.org/2000/svg">'
    /* defs */
    +'<defs>'
    +'<linearGradient id="dk1" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#fb923c"/><stop offset="100%" stop-color="#c2410c"/></linearGradient>'
    +'<linearGradient id="dk1t" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#fdba74"/><stop offset="100%" stop-color="#fb923c"/></linearGradient>'
    +'<linearGradient id="dk2" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#f472b6"/><stop offset="100%" stop-color="#be185d"/></linearGradient>'
    +'<linearGradient id="dk2t" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#f9a8d4"/><stop offset="100%" stop-color="#f472b6"/></linearGradient>'
    +'<linearGradient id="dk3" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#fde047"/><stop offset="100%" stop-color="#ca8a04"/></linearGradient>'
    +'<linearGradient id="dk3t" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#fef08a"/><stop offset="100%" stop-color="#fde047"/></linearGradient>'
    +'<filter id="ckglow"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>'
    +'<filter id="ckshadow" x="-5%" y="-5%" width="110%" height="120%"><feDropShadow dx="0" dy="6" stdDeviation="8" flood-color="rgba(194,65,12,.2)"/></filter>'
    +'</defs>'
    /* plate */
    +'<ellipse cx="110" cy="238" rx="97" ry="10" fill="rgba(180,80,10,.08)"/>'
    /* bottom tier shadow */
    +'<rect x="8" y="178" width="204" height="58" rx="16" fill="url(#dk1)" filter="url(#ckshadow)"/>'
    /* bottom tier */
    +'<rect x="8" y="174" width="204" height="58" rx="16" fill="url(#dk1)"/>'
    +'<rect x="8" y="169" width="204" height="12" rx="6" fill="url(#dk1t)"/>'
    /* frosting drips bottom - organic */
    +'<path d="M10 178 Q18 164 28 178 Q38 162 50 178 Q60 163 72 178 Q83 162 96 178 Q108 163 120 178 Q132 162 144 178 Q156 163 168 178 Q180 162 192 178 Q200 165 210 178" fill="none" stroke="rgba(255,255,255,.72)" stroke-width="5.5" stroke-linecap="round"/>'
    /* bottom decorations */
    +'<circle cx="46" cy="202" r="7.5" fill="rgba(255,255,255,.55)"/>'
    +'<circle cx="80" cy="204" r="5.5" fill="rgba(253,224,71,.65)"/>'
    +'<circle cx="142" cy="202" r="7.5" fill="rgba(255,255,255,.55)"/>'
    +'<circle cx="174" cy="204" r="5.5" fill="rgba(253,224,71,.65)"/>'
    +'<circle cx="112" cy="205" r="4.5" fill="rgba(249,168,212,.7)"/>'
    /* mid tier */
    +'<rect x="28" y="130" width="164" height="47" rx="13" fill="url(#dk2)" filter="url(#ckshadow)"/>'
    +'<rect x="28" y="130" width="164" height="47" rx="13" fill="url(#dk2)"/>'
    +'<rect x="28" y="125" width="164" height="12" rx="6" fill="url(#dk2t)"/>'
    +'<path d="M28 134 Q39 121 50 134 Q61 121 72 134 Q83 121 94 134 Q105 121 116 134 Q127 121 138 134 Q149 121 160 134 Q171 121 182 134 Q186 127 192 134" fill="none" stroke="rgba(255,255,255,.58)" stroke-width="4" stroke-linecap="round"/>'
    /* mid sprinkles */
    +'<rect x="50" y="149" width="10" height="3" rx="1.5" fill="rgba(255,255,255,.7)" transform="rotate(-20 50 149)"/>'
    +'<rect x="85" y="142" width="10" height="3" rx="1.5" fill="rgba(253,224,71,.8)" transform="rotate(15 85 142)"/>'
    +'<rect x="128" y="148" width="10" height="3" rx="1.5" fill="rgba(255,255,255,.7)" transform="rotate(-10 128 148)"/>'
    +'<rect x="160" y="141" width="10" height="3" rx="1.5" fill="rgba(253,224,71,.8)" transform="rotate(20 160 141)"/>'
    +'<circle cx="105" cy="155" r="3" fill="rgba(255,255,255,.5)"/>'
    /* top tier */
    +'<rect x="57" y="93" width="106" height="40" rx="11" fill="url(#dk3)"/>'
    +'<rect x="57" y="88" width="106" height="12" rx="6" fill="url(#dk3t)"/>'
    +'<path d="M57 96 Q66 85 75 96 Q84 85 93 96 Q102 85 111 96 Q120 85 129 96 Q138 85 147 96 Q154 88 163 96" fill="none" stroke="rgba(255,255,255,.55)" stroke-width="3.2" stroke-linecap="round"/>'
    /* HBD text */
    +'<text x="110" y="119" text-anchor="middle" font-family="Georgia,serif" font-size="13" fill="rgba(100,45,0,.72)" font-style="italic" font-weight="bold">Happy Birthday!</text>'
    /* candles */
    + parts.cands
    /* flames with glow filter */
    +'<g filter="url(#ckglow)">'+ parts.flames +'</g>'
    /* ambient stars */
    +'<text x="4" y="30" font-size="14" opacity=".38">â­</text>'
    +'<text x="200" y="26" font-size="12" opacity=".32">âœ¨</text>'
    +'<text x="-2" y="75" font-size="11" opacity=".22">ğŸ’«</text>'
    +'<text x="210" y="80" font-size="10" opacity=".22">ğŸŒŸ</text>'
    +'</svg>';

  /* hit areas */
  var svg = wrap.querySelector('svg');
  for(var i = 0; i < 5; i++){
    if(candles[i]) continue;
    (function(idx){
      var cx = 34 + idx*38;
      var hit = document.createElementNS('http://www.w3.org/2000/svg','rect');
      hit.setAttribute('x', cx-18);
      hit.setAttribute('y', '28');
      hit.setAttribute('width', '36');
      hit.setAttribute('height', '88');
      hit.setAttribute('fill', 'transparent');
      hit.setAttribute('cursor', 'pointer');
      hit.addEventListener('click', function(){ blowCandle(idx); });
      hit.addEventListener('touchend', function(e){ e.preventDefault(); blowCandle(idx); });
      svg.appendChild(hit);
    })(i);
  }
}

function blowCandle(i){
  if(candles[i]) return;
  candles[i] = true; blown++;
  var dot = G('bd'+(blown-1));
  if(dot) dot.classList.add('lit');

  var wl = G('wishList');
  var p = document.createElement('div');
  p.className = 'wish-pill';
  p.innerHTML = '<span>ğŸŒŸ</span><span>' + WISHES[i] + '</span>';
  wl.appendChild(p);

  var wr = G('cakeWrap').getBoundingClientRect();
  var px = wr.left + wr.width*(34+i*38)/220;
  var py = wr.top + wr.height*52/260;
  for(var j = 0; j < 3; j++) spawnTc(px+(Math.random()*14-7), py+(Math.random()*14-7), 5);
  fwRockets.push(new RocketFW());

  drawCake();

  if(blown === 5){
    setTimeout(function(){
      G('candleHint').style.display = 'none';
      G('cakeDone').style.display = 'block';
      burst(8); launchConf(24);
    }, 500);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EVENT LISTENERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
G('btnStart').addEventListener('click', function(){ goTo(2); });
G('btnCake').addEventListener('click', function(){ goTo(5); });
G('btnFw').addEventListener('click', function(){ burst(12); });
G('btnGift').addEventListener('click', function(){ goTo(6); });
G('btnFinale').addEventListener('click', function(){ megaBurst(); launchConf(38); });
G('celeb').addEventListener('click', hideCeleb);

document.addEventListener('click', function(e){
  if(!e.target.closest('button') && !e.target.closest('.q-opt') && !e.target.closest('#cakeWrap')){
    spawnTc(e.clientX, e.clientY, 6);
  }
});
document.addEventListener('touchstart', function(e){
  if(!e.target.closest('button') && !e.target.closest('.q-opt') && !e.target.closest('#cakeWrap')){
    for(var i = 0; i < e.changedTouches.length; i++){
      spawnTc(e.changedTouches[i].clientX, e.changedTouches[i].clientY, 4);
    }
  }
},{passive:true});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AMBIENT INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
setTimeout(function(){ fwRockets.push(new RocketFW()); }, 1000);
setTimeout(function(){ fwRockets.push(new RocketFW()); }, 2600);

})(); /* end IIFE */
</script>
</body>
</html>
